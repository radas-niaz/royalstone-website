<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Royal Stone Countertops & Blinds | Premium Surfaces & Window Coverings</title>
  <meta name="description" content="Winnipeg’s premium quartz, granite, marble countertops, and custom window blinds & shades. Free in-home measurement and quotes." />
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root { --nav-h: 72px; }
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { height:100%; }
    body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color:#333; background:#000; line-height:1.6; overflow-x:hidden; }

    /* Background */
    #webgl-canvas { position: fixed; inset: 0; width: 100%; height: 100%; z-index: -1; }

    /* Mobile menu */
    .menu-toggle { display: none; flex-direction: column; cursor: pointer; padding: 5px; }
    .menu-toggle span { width: 25px; height: 3px; background: #2c3e50; margin: 3px 0; transition: 0.3s; }

    /* Navbar */
    .navbar { position: fixed; top: 0; width: 100%; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); height: var(--nav-h); padding: 0; box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1); z-index: 99; }
    .nav-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; height: 100%; padding: 0 20px; }
    .logo { display:inline-flex; align-items:center; text-decoration:none; }
    .logo-img { display:block; height:auto; max-height: calc(var(--nav-h) - 12px); width:auto; aspect-ratio:422 / 364; filter: drop-shadow(0 1px 1px rgba(0,0,0,0.15)); }
    .nav-links { display: flex; list-style: none; align-items:center; gap: 26px; }
    .nav-links a { text-decoration: none; color: #2c3e50; font-weight: 500; font-size: 1.05rem; transition: color 0.3s; padding: 8px 12px; border-radius: 6px; }
    .nav-links a:hover, .nav-links a.active { color: #1a2530; background: rgba(44, 62, 80, 0.1); }

    /* Hero */
    .hero { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 20px; position: relative; z-index: 10; padding-top: calc(var(--nav-h) + 40px); }
    .hero-content { max-width: 1000px; background: rgba(255, 255, 255, 0.92); backdrop-filter: blur(12px); border-radius: 20px; padding: 50px 40px; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25), 0 5px 15px rgba(0, 0, 0, 0.1); position: relative; overflow: hidden; margin: 20px; width: calc(100% - 40px); }
    .hero-content::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 5px; background: linear-gradient(90deg, #2c3e50, #1a2530, #2c3e50); }
    .eyebrow { display:inline-block; margin-bottom:8px; font-weight:700; letter-spacing:.12em; text-transform:uppercase; font-size:.85rem; color:#334155; background:#f1f5f9; padding:.3rem .6rem; border-radius:999px; border:1px solid #e2e8f0; }
    .hero h1 { font-size: clamp(2.2rem, 5vw, 3.6rem); margin: 8px 0 10px; color: #1a2530; font-weight: 900; letter-spacing: .3px; line-height: 1.15; }
    .hero p { font-size: clamp(1.05rem, 2.2vw, 1.35rem); margin-bottom: 24px; color: #4b5563; font-weight: 400; max-width: 760px; margin-left: auto; margin-right: auto; line-height: 1.5; }

    .cta-buttons { display: flex; justify-content: center; gap: 16px; flex-wrap: wrap; margin-top: 14px; }
    .cta-button { display: inline-block; background: linear-gradient(135deg, #2c3e50, #1a2530); color: white; font-size: 1.05rem; font-weight: 700; padding: 16px 28px; border-radius: 50px; text-decoration: none; transition: all 0.35s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2), 0 2px 5px rgba(0, 0, 0, 0.1); border: none; cursor: pointer; letter-spacing: .4px; text-transform: uppercase; position: relative; overflow: hidden; }
    .cta-button:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.28), 0 5px 10px rgba(0, 0, 0, 0.15); background: linear-gradient(135deg, #1a2530, #2c3e50); }
    .secondary-button { background: transparent; border: 2px solid #2c3e50; color: #2c3e50; }

    /* Features */
    .features { display: grid; gap: 16px; grid-template-columns: repeat(3, minmax(160px, 1fr)); margin: 28px 0 8px; }
    .feature { background: rgba(255, 255, 255, 0.75); padding: 18px; border-radius: 14px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); transition: transform 0.25s ease; text-align:center; }
    .feature:hover { transform: translateY(-4px); }
    .feature i { font-size: 2rem; margin-bottom: 10px; color: #2c3e50; }
    .feature h3 { font-size: 1rem; margin-bottom: 6px; color: #1a2530; }
    .feature p { font-size: .9rem; color: #606a75; }

    /* Sections */
    .section { padding: 56px 20px; position: relative; z-index: 10; }
    .container { max-width: 1200px; margin: 0 auto; }
    .section h2 { font-size: clamp(1.6rem, 3.5vw, 2.2rem); color: #0f172a; margin-bottom: 8px; }
    .muted { color: #64748b; }
    .grid { display: grid; gap: 16px; }
    .grid-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }

    .card { background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:18px; }
    .card h3 { margin-bottom:6px; }
    .card p { color:#607086; }
    .pill { display:inline-block; padding:.35rem .65rem; border-radius:999px; font-size:.75rem; background:#f1f5f9; border:1px solid #e2e8f0; color:#334155; }

    /* Slower hover on tiles (and gentle zoom) */
    .product-tile { background:#fff; border:1px solid #e5e7eb; border-radius:16px; overflow:hidden; display:flex; flex-direction:column; transition: transform .65s ease, box-shadow .65s ease; }
    .product-tile:hover { transform: translateY(-6px); box-shadow: 0 18px 28px rgba(0,0,0,.14); }
    .product-tile img { width: 100%; aspect-ratio: 1 / 1; object-fit: cover; height: auto; transition: transform .7s ease; }
    .product-tile:hover img { transform: scale(1.05); }
    .product-tile .body { padding:14px; }

    /* Footer */
    .footer { text-align: center; color: rgba(255, 255, 255, 0.8); font-size: 0.95rem; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); letter-spacing: 0.5px; padding: 30px 20px; margin-top: 20px; }

    /* Modal */
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 100; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s ease; }
    .modal.active { display: flex; opacity: 1; overflow: hidden; }
    .modal-content { background: white; border-radius: 15px; width: 90%; max-width: 560px; padding: 26px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); transform: translateY(20px); transition: transform 0.4s ease; position: relative; max-height: 90vh; overflow-y: auto; }
    .modal.active .modal-content { transform: translateY(0); }
    .close-modal { position: absolute; top: 15px; right: 15px; font-size: 1.5rem; cursor: pointer; color: #777; }
    .modal h2 { color: #2c3e50; margin-bottom: 16px; text-align: center; padding-top: 12px; }
    .form-group { margin-bottom: 14px; }
    .form-group label { display: block; margin-bottom: 6px; font-weight: 600; color: #3b4450; }
    .form-group input, .form-group select { width: 100%; padding: 11px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem; }
    .checkboxes { display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:10px; }
    .checkboxes label { display:flex; align-items:center; gap:8px; font-size:.95rem; color:#374151; border:1px solid #e5e7eb; border-radius:10px; padding:8px 10px; background:#fafafa; }
    .submit-btn { background: linear-gradient(135deg, #2c3e50, #1a2530); color: white; border: none; padding: 14px; width: 100%; border-radius: 10px; font-size: 1.05rem; font-weight: 700; cursor: pointer; }
    .success-message { display: none; text-align: center; padding: 20px; color: #27ae60; font-size: 1.2rem; font-weight: 600; }
    .error-message { display: none; text-align: center; padding: 12px; color: #e74c3c; font-size: .98rem; margin-top: 10px; background: rgba(231, 76, 60, 0.08); border-radius: 8px; }
    .loading { display: none; text-align: center; padding: 12px; }
    .loading-spinner { border: 4px solid rgba(0, 0, 0, 0.08); border-radius: 50%; border-top: 4px solid #2c3e50; width: 28px; height: 28px; animation: spin 1s linear infinite; margin: 0 auto 10px; }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* === Mobile polish overrides === */
    /* === Mobile polish overrides === */
@media (max-width: 640px) {
  :root { --nav-h: 64px; }
  .logo-img { max-height: 44px; width: auto; }
  .menu-toggle { display: flex; }       /* <-- add this line */
  .hero { padding-top: calc(var(--nav-h) + 20px + env(safe-area-inset-top, 0)); }
  .hero-content { padding: 22px 16px; border-radius: 16px; }
  .eyebrow { font-size: .78rem; }
  .hero h1 { font-size: clamp(1.6rem, 7vw, 2.2rem); }
  .hero p  { font-size: 1rem; }

  .nav-links {
    position: fixed;
    left: -100%;
    top: var(--nav-h);
    height: calc(100vh - var(--nav-h));
    overflow-y: auto;
    flex-direction: column;
    background: rgba(255,255,255,.96);
    width: 100%;
    text-align: center;
    transition: left .3s ease;
    box-shadow: 0 10px 27px rgba(0,0,0,.05);
    padding: 18px 0 24px;
    backdrop-filter: blur(10px);
    gap: 10px;
  }
  .nav-links.active { left: 0; }

  .features { grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 12px; }
  .grid-3   { grid-template-columns: 1fr; }

  .product-tile { border-radius: 12px; }
  .product-tile img { aspect-ratio: 1 / 1; }

  .cta-buttons { flex-direction: column; gap: 10px; }
}

    @media (max-width: 400px) { .features { grid-template-columns: 1fr; } }

    /* Turn off “hover” effects on touch devices */
    @media (hover: none), (pointer: coarse) {
      .product-tile:hover { transform: none; box-shadow: 0 4px 12px rgba(0,0,0,.08); }
      .product-tile:hover img { transform: none; }
    }

    /* Sticky mobile CTA bar */
    .mobile-cta {
      position: fixed; left: 0; right: 0;
      bottom: env(safe-area-inset-bottom, 0);
      display: none; gap: 8px;
      padding: 10px 12px;
      background: rgba(255,255,255,.96);
      box-shadow: 0 -6px 18px rgba(0,0,0,.12);
      z-index: 90;
    }
    .mobile-cta a, .mobile-cta button {
      flex: 1; display: inline-flex; align-items: center; justify-content: center;
      gap: 8px; padding: 12px 14px;
      border-radius: 999px; border: 1px solid #e5e7eb;
      font-weight: 700; font-size: 1rem;
      background:#fff; color:#1f2937;
    }
    .mobile-cta a { text-decoration: none; }
    .mobile-cta button { background: linear-gradient(135deg, #2c3e50, #1a2530); color:#fff; border:none; }
    @media (max-width: 640px) { .mobile-cta { display: flex; } }
    body.menu-open .mobile-cta, body.modal-open .mobile-cta { display: none; }
  </style>
</head>
<body>
  <canvas id="webgl-canvas"></canvas>

  <nav class="navbar" role="navigation" aria-label="Primary">
    <div class="nav-container">
      <a href="index.html" class="logo"><img src="images/logo.png" alt="Royal Stone Countertops & Blinds" class="logo-img" width="422" height="364"></a>
      <div class="menu-toggle" id="mobile-menu" aria-label="Toggle menu" aria-expanded="false" aria-controls="nav-links">
        <span></span><span></span><span></span>
      </div>
      <ul class="nav-links" id="nav-links">
        <li><a href="#blinds">Blinds</a></li>
        <li><a href="#countertops">Countertops</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </div>
  </nav>

  <div class="hero">
    <div class="hero-content">
      <span class="eyebrow">Quartz · Granite · Marble · Custom Blinds</span>
      <h1>Royal Stone Countertops & Blinds</h1>
      <p>Premium stone surfaces and custom window coverings—templated, fabricated & installed. Serving Winnipeg & surrounding areas.</p>

      <div class="features" aria-label="Key services">
        <div class="feature"><i class="fas fa-utensils"></i><h3>Kitchen Counters</h3><p>Durable quartz & granite</p></div>
        <div class="feature"><i class="fas fa-border-all"></i><h3>Island Tops</h3><p>Seamless, custom cut</p></div>
        <div class="feature"><i class="fas fa-bath"></i><h3>Bathroom Vanities</h3><p>Polished edges, precise fit</p></div>
        <div class="feature"><i class="fas fa-sliders"></i><h3>Zebra / Dual</h3><p>Light control with style</p></div>
        <div class="feature"><i class="fas fa-circle-half-stroke"></i><h3>Blackout & Roller</h3><p>Privacy & better sleep</p></div>
        <div class="feature"><i class="fas fa-bolt"></i><h3>Motorized</h3><p>Remote & smart-home ready</p></div>
      </div>

      <div class="cta-buttons">
        <button class="cta-button" id="quoteBtn" aria-haspopup="dialog" aria-controls="quoteModal">Get a Free Quote</button>
        <a href="tel:+15145615982" class="cta-button secondary-button"><i class="fas fa-phone"></i> Call: (514) 561-5982</a>
      </div>
    </div>
    <div class="footer">
      <p>© <span id="year"></span> Royal Stone Countertops & Blinds. Winnipeg, Manitoba. All rights reserved.</p>
    </div>
  </div>

  <!-- BLINDS SECTION -->
  <section id="blinds" class="section" style="background:#fafafa;">
    <div class="container">
      <h2>Custom Window Blinds & Shades</h2>
      <p class="muted">Free in-home measurement, fast turnaround, and professional installation. Choose from a wide range of fabrics and controls.</p>

      <div class="grid grid-3" style="margin-top:14px;">
        <article class="product-tile">
          <img src="images/blinds1.jpg" decoding="async" loading="lazy" width="768" height="768" alt="Zebra / Dual blinds">
          <div class="body">
            <h3>Zebra / Dual</h3>
            <p>Alternate sheer & solid bands for day–night control without sacrificing style.</p>
          </div>
        </article>
        <article class="product-tile">
          <img src="images/blinds2.jpg" decoding="async" loading="lazy" width="768" height="768" alt="Roller & Blackout blinds">
          <div class="body">
            <h3>Roller & Blackout</h3>
            <p>Sleek rollers for living spaces; blackout fabrics for bedrooms & media rooms.</p>
          </div>
        </article>
        <article class="product-tile">
          <img src="images/blinds3.jpg" decoding="async" loading="lazy" width="768" height="768" alt="Faux Wood & Cellular blinds">
          <div class="body">
            <h3>Faux Wood & Cellular</h3>
            <p>Classic wood look or energy-efficient honeycomb cells that insulate your home.</p>
          </div>
        </article>
      </div>

      <div class="grid grid-3" style="margin-top:16px;">
        <div class="card"><span class="pill">Why us</span><h3>Measure · Fabricate · Install</h3><p>One team from quote to finish—clean, insured installs and neat caulking.</p></div>
        <div class="card"><span class="pill">Smart</span><h3>Manual or Motorized</h3><p>Remote control, wall switch, or smart-home integration (ask for options).</p></div>
        <div class="card"><span class="pill">Warranty</span><h3>Peace of Mind</h3><p>Hardware & workmanship warranty. Samples brought to your home.</p></div>
      </div>
    </div>
  </section>

  <!-- COUNTERTOPS SECTION -->
  <section id="countertops" class="section">
    <div class="container">
      <h2>Stone Countertops</h2>
      <p class="muted">Quartz · Granite · Marble — precise templating, CNC fabrication, and spotless installation.</p>
      <div class="grid grid-3" style="margin-top:14px;">
        <article class="product-tile">
          <img src="images/countertop1.jpg" decoding="async" loading="lazy" width="768" height="768" alt="Kitchen countertop">
          <div class="body">
            <h3>Kitchen</h3>
            <p>Seams aligned with grain, polished edges, sink & cooktop cutouts included.</p>
          </div>
        </article>
        <article class="product-tile">
          <img src="images/countertop2.jpg" decoding="async" loading="lazy" width="768" height="768" alt="Washroom countertop">
          <div class="body">
            <h3>Washroom</h3>
            <p>Vanities, splashes, and niche shelves with a waterproof finish.</p>
          </div>
        </article>
        <article class="product-tile">
          <img src="images/countertop3.jpg" decoding="async" loading="lazy" width="768" height="768" alt="Fireplace & TV wall stone cladding">
          <div class="body">
            <h3>Fireplace & TV Wall</h3>
            <p>Large-format cladding and surrounds that transform living spaces.</p>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Quote Modal -->
  <div class="modal" id="quoteModal" role="dialog" aria-modal="true" aria-labelledby="quoteTitle">
    <div class="modal-content">
      <span class="close-modal" id="closeModal" aria-label="Close">&times;</span>
      <h2 id="quoteTitle">Get a Free Quote</h2>
      <form id="quoteForm">
        <div class="form-group">
          <label for="name">Full Name *</label>
          <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
          <label for="phone">Phone Number *</label>
          <input type="tel" id="phone" name="phone" required>
        </div>
        <div class="form-group">
          <label for="email">Email Address *</label>
          <input type="email" id="email" name="email" required>
        </div>

        <div class="form-group">
          <label>Interested In *</label>
          <div class="checkboxes">
            <label><input type="checkbox" name="service" value="Countertops"> Countertops</label>
            <label><input type="checkbox" name="service" value="Blinds"> Blinds</label>
            <label><input type="checkbox" name="service" value="Both"> Both</label>
          </div>
        </div>

        <div class="form-group">
          <label for="project">Project Type (optional)</label>
          <select id="project" name="project">
            <option value="">Select…</option>
            <option value="kitchen">Kitchen Countertop</option>
            <option value="island">Kitchen Island</option>
            <option value="bathroom">Bathroom Vanity</option>
            <option value="zebra">Zebra / Dual Blinds</option>
            <option value="roller">Roller / Blackout Blinds</option>
            <option value="cellular">Cellular / Honeycomb Blinds</option>
          </select>
        </div>

        <div class="form-group">
          <label for="notes">Notes (sizes, rooms, timeline)</label>
          <input type="text" id="notes" name="notes" placeholder="E.g., 3 bedroom windows; 10ft island; install by next month">
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">Submit Request</button>
        <div class="loading" id="loading">
          <div class="loading-spinner"></div>
          <p>Sending your request...</p>
        </div>
        <div class="error-message" id="errorMessage"></div>
      </form>
      <div class="success-message" id="successMessage">
        <i class="fas fa-check-circle" style="font-size: 3rem; margin-bottom: 15px;"></i>
        <p>Thank you! Your request has been sent successfully.</p>
        <p>We'll contact you shortly at <strong id="confirmPhone"></strong>.</p>
      </div>
    </div>
  </div>

  <!-- Sticky mobile bar -->
  <div class="mobile-cta" aria-label="Quick actions">
    <a href="tel:+15145615982"><i class="fas fa-phone"></i> Call</a>
    <button type="button" id="quoteBtnMobile"><i class="fas fa-comment-dots"></i> Quote</button>
  </div>

  <div class="footer">
    <p>© <span id="year"></span> Royal Stone Countertops & Blinds. Winnipeg, Manitoba. All rights reserved.</p>
  </div>

  <script>
    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Mobile menu toggle
    const mobileMenu = document.getElementById('mobile-menu');
    const navLinks   = document.getElementById('nav-links');
    mobileMenu?.addEventListener('click', () => {
      const nowActive = navLinks.classList.toggle('active');
      mobileMenu.setAttribute('aria-expanded', String(nowActive));
      document.body.classList.toggle('menu-open', nowActive);
    });
    document.querySelectorAll('.nav-links a').forEach(link => {
      link.addEventListener('click', () => {
        navLinks.classList.remove('active');
        mobileMenu.setAttribute('aria-expanded','false');
        document.body.classList.remove('menu-open');
      });
    });
    window.addEventListener('resize', () => {
      if (window.innerWidth > 768 && navLinks.classList.contains('active')) {
        navLinks.classList.remove('active');
        mobileMenu.setAttribute('aria-expanded','false');
        document.body.classList.remove('menu-open');
      }
    });

    // Open quote modal from sticky bar
    document.getElementById('quoteBtnMobile')?.addEventListener('click', () => {
      document.getElementById('quoteBtn')?.click();
    });

    // When modal opens/closes, toggle a body class to hide the sticky bar
    const quoteModal = document.getElementById('quoteModal');
    const closeModal = document.getElementById('closeModal');
    const observeModal = () => {
      if (!quoteModal) return;
      const onOpen = () => document.body.classList.add('modal-open');
      const onClose = () => document.body.classList.remove('modal-open');
      const mo = new MutationObserver(() => {
        if (quoteModal.classList.contains('active')) onOpen(); else onClose();
      });
      mo.observe(quoteModal, { attributes:true, attributeFilter:['class'] });
    };
    observeModal();

    // Quote modal open/close
    const quoteBtn = document.getElementById('quoteBtn');
    const quoteForm = document.getElementById('quoteForm');
    const successMessage = document.getElementById('successMessage');
    const errorMessage   = document.getElementById('errorMessage');
    const loading        = document.getElementById('loading');
    const submitBtn      = document.getElementById('submitBtn');
    const confirmPhone   = document.getElementById('confirmPhone');

    quoteBtn.addEventListener('click', () => {
      quoteModal.classList.add('active');
      document.body.classList.add('modal-open');
      document.body.style.overflow = 'hidden';
      setTimeout(() => { document.getElementById('name')?.focus(); }, 50);
    });
    closeModal.addEventListener('click', () => {
      quoteModal.classList.remove('active');
      document.body.classList.remove('modal-open');
      document.body.style.overflow = '';
    });
    addEventListener('keydown', (e)=>{ if(e.key==='Escape' && quoteModal.classList.contains('active')) closeModal.click(); });
    addEventListener('click', (e)=>{ if(e.target===quoteModal) closeModal.click(); });

    // If URL has #quote, open the modal
    if (location.hash === '#quote') {
      setTimeout(() => quoteBtn.click(), 100);
    }

    // Submit (Google Apps Script endpoint)
    quoteForm.addEventListener('submit', (e) => {
      e.preventDefault();
      submitBtn.disabled = true; submitBtn.textContent = 'Sending...';
      loading.style.display = 'block'; errorMessage.style.display = 'none';
      const formData = new FormData(quoteForm);
      fetch('https://script.google.com/macros/s/AKfycbwLwZgTjYFf-sD60CiWbzzfv1BwhpGb1kq3sasw0YimkCuS5E-hMcLIcdMKR1FspvXWnA/exec', { method: 'POST', body: formData })
        .then(r => r.json())
        .then(data => {
          if (data.result === 'success') {
            quoteForm.style.display = 'none';
            successMessage.style.display = 'block';
            confirmPhone.textContent = formData.get('phone');
            setTimeout(() => {
              quoteForm.reset();
              quoteModal.classList.remove('active');
              document.body.classList.remove('modal-open');
              quoteForm.style.display = 'block';
              successMessage.style.display = 'none';
              submitBtn.disabled = false; submitBtn.textContent = 'Submit Request';
              loading.style.display = 'none'; document.body.style.overflow = '';
            }, 5000);
          } else { throw new Error('Submission failed'); }
        })
        .catch(err => {
          console.error(err);
          errorMessage.textContent = 'There was an error submitting your request. Please try again.';
          errorMessage.style.display = 'block';
          submitBtn.disabled = false; submitBtn.textContent = 'Submit Request';
          loading.style.display = 'none';
          setTimeout(()=>{ errorMessage.style.display = 'none'; }, 5000);
        });
    });

    // WebGL background
    const canvas = document.getElementById('webgl-canvas');
    const gl = canvas.getContext('webgl2') || canvas.getContext('webgl');
    function resizeCanvas() { canvas.width = innerWidth; canvas.height = innerHeight; if (gl) gl.viewport(0,0,canvas.width,canvas.height); }
    addEventListener('resize', resizeCanvas); resizeCanvas();
    if (!gl) { console.warn('WebGL not supported by your browser.'); }

    const vertexShaderSource = `#version 300 es
      in vec4 aPosition; void main(){ gl_Position = aPosition; }`;
    const fragmentShaderSource = `#version 300 es
      precision highp float; uniform float uTime; uniform vec2 uResolution; out vec4 fragColor;
      float hash(float n){ return fract(sin(n)*1e4); }
      float hash(vec2 p){ return fract(1e4 * sin(17.0*p.x + p.y*0.1) * (0.1 + abs(sin(p.y*13.0 + p.x)))); }
      float noise(vec2 x){ vec2 i=floor(x); vec2 f=fract(x);
        float a=hash(i); float b=hash(i+vec2(1.0,0.0)); float c=hash(i+vec2(0.0,1.0)); float d=hash(i+vec2(1.0,1.0));
        vec2 u=f*f*(3.0-2.0*f); return mix(a,b,u.x) + (c-a)*u.y*(1.0-u.x) + (d-b)*u.x*u.y; }
      float fbm(vec2 p){ float f=0.0; f+=0.5*noise(p); p*=2.02; f+=0.25*noise(p); p*=2.03; f+=0.125*noise(p); p*=2.01; f+=0.0625*noise(p); return f/0.9375; }
      float marble(vec2 p){ float n=fbm(p*2.5); return sin(p.x*1.5 + n*3.0 + uTime*0.15); }
      float granite(vec2 p){ float n=fbm(p*4.0); return sin(p.x*3.0 + p.y*2.0 + n*2.0 + uTime*0.1); }
      vec3 palette(float t, vec3 a, vec3 b, vec3 c, vec3 d){ return a + b * cos(6.28318 * (c*t + d)); }
      void main(){
        vec2 uv=gl_FragCoord.xy/uResolution.xy; uv.x *= uResolution.x/uResolution.y;
        vec2 q=vec2(0.0); q.x = marble(uv + 0.1*uTime); q.y = granite(uv + vec2(1.0));
        float mp=marble(uv*1.8 + q + 0.15*uTime); float gp=granite(uv*2.2 + q*0.5 + 0.1*uTime);
        float pattern=mix(mp,gp,0.5 + 0.2*sin(uTime*0.2));
        vec3 color=palette(pattern*0.5+0.5, vec3(0.85,0.82,0.78), vec3(0.3,0.25,0.2), vec3(1.0,0.95,0.9), vec3(0.35,0.3,0.25));
        float veins=smoothstep(-0.1,0.3, sin(pattern*25.0 + uTime*0.1)); color *= 1.0 - veins*0.25;
        float crystals=smoothstep(0.7,1.0, pattern); color += vec3(0.9,0.85,0.8) * crystals * 0.4;
        float depth=sin(uv.y*3.0 + uTime*0.05)*0.1 + 0.15; color += vec3(depth*0.8, depth*0.7, depth*0.6);
        vec2 vig=uv*(1.0-uv.yx); float vignette=vig.x*vig.y*15.0; vignette = pow(vignette, 0.25); color *= vignette*0.7 + 0.3;
        float shimmer = fbm(uv*10.0 + uTime*0.2)*0.05; color += vec3(shimmer*0.8, shimmer*0.7, shimmer*0.6);
        fragColor = vec4(color, 1.0);
      }`;

    function compileShader(source, type){ const s = gl.createShader(type); gl.shaderSource(s, source); gl.compileShader(s); if (!gl.getShaderParameter(s, gl.COMPILE_STATUS)) { console.error('Shader error:', gl.getShaderInfoLog(s)); gl.deleteShader(s); return null; } return s; }
    function createProgram(vs, fs){ const p = gl.createProgram(); gl.attachShader(p, vs); gl.attachShader(p, fs); gl.linkProgram(p); if (!gl.getProgramParameter(p, gl.LINK_STATUS)) { console.error('Link error:', gl.getProgramInfoLog(p)); gl.deleteProgram(p); return null; } return p; }

    if (gl) {
      const vs = compileShader(vertexShaderSource, gl.VERTEX_SHADER);
      const fs = compileShader(fragmentShaderSource, gl.FRAGMENT_SHADER);
      const program = createProgram(vs, fs);
      const vertices = new Float32Array([-1,-1,0, 1,-1,0, -1,1,0, 1,1,0]);
      const indices = new Uint16Array([0,1,2, 1,3,2]);
      const vb = gl.createBuffer(); gl.bindBuffer(gl.ARRAY_BUFFER, vb); gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
      const ib = gl.createBuffer(); gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ib); gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);
      const posLoc = gl.getAttribLocation(program, 'aPosition');
      const timeLoc = gl.getUniformLocation(program, 'uTime');
      const resLoc = gl.getUniformLocation(program, 'uResolution');
      gl.useProgram(program);

      (function render(){
        const t = (Date.now())/1000;
        gl.clearColor(0,0,0,1); gl.clear(gl.COLOR_BUFFER_BIT);
        gl.uniform1f(timeLoc, t);
        gl.uniform2f(resLoc, canvas.width, canvas.height);
        gl.bindBuffer(gl.ARRAY_BUFFER, vb);
        gl.enableVertexAttribArray(posLoc);
        gl.vertexAttribPointer(posLoc, 3, gl.FLOAT, false, 0, 0);
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ib);
        gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);
        requestAnimationFrame(render);
      })();
    }
  </script>
  <script src="widget.js"></script>

</body>
</html>
